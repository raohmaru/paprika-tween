/*! For license information please see https://github.com/raohmaru/paprika-tween/blob/master/LICENSE */
var p=class{constructor(){this.spices=[]}add(...s){for(let t=0;t<s.length;t++)this.spices.push(s[t]);return this}start(s){for(let t=0;t<this.spices.length;t++)this.spices[t].start(s);return this}dispose(){for(let s=this.spices.length-1;s!==-1;s--)this.spices[s].dispose();this.spices.length=0}frame(s){for(let t=0;t<this.spices.length;t++)this.spices[t].frame(s)}};var n=class{constructor(){this.elapsed=0}elapse(s){let t=(s-this._startTime)/this.duration;return t<0?t=0:t>1&&(t=1),t}};var d={onEnd:()=>{}},l=class extends n{constructor(s){super(),Object.assign(this,d,s),this.spices=[]}add(...s){for(let t=0;t<s.length;t++)this.spices.push(s[t]);return this}start(s){let t,e=0;for(let r=0;r<this.spices.length;r++)t=this.spices[r],this.elapsed||(t.delay+=e,e=t.duration+t.delay),t.start(s);return this._startTime=this.spices[0]._startTime,this.elapsed||(this.duration=e),this}frame(s){if(!this.spices.length)return;s??(s=performance.now());let t=this.elapse(s);if(this.elapsed!==t){this.elapsed=t;for(let e=0;e<this.spices.length;e++)this.spices[e].frame(s);t===1&&this.onEnd(this)}}dispose(){for(let s=this.spices.length-1;s!==-1;s--)this.spices[s].dispose();this.spices.length=0,this.onEnd=null}};var f={duration:0,delay:0,from:{},to:{},easing:i=>i,render:()=>{},onEnd:()=>{}},h=class extends n{constructor(s){super(),Object.assign(this,f,s)}start(s){this._startTime=s??performance.now(),this._startTime+=this.delay,this._interpolated=Object.assign(Object.create(null),this.to)}frame(s){s??(s=performance.now());let t=this.elapse(s);if(this.elapsed===t)return;this.elapsed=t;let e=this.easing(t),r,m,a;for(a in this._interpolated)r=this.from[a]??0,m=this.to[a],this._interpolated[a]=r+(m-r)*e;this.render(this._interpolated,e,this),t===1&&this.onEnd(this._interpolated,this)}dispose(){this.from=null,this.to=null,this.render=null,this.onEnd=null}update(s){return Object.assign(this,s),this}};var o=class{constructor(s,t=60){this._cb=s,this._fpsInterval=1e3/t,this._running=!1}start(){this._startTime=performance.now(),this._previousTime=this._startTime,this._previousDeltaTime=this._startTime,this._pausedTime=0,this._running=!0,this._onFrame=s=>this.frame(s),this.frame(this._startTime)}pause(){this._running=!1,this._previousPauseTime=performance.now()}resume(){let s=performance.now();this._pausedTime+=s-this._previousPauseTime,this._running=!0,this.frame(s)}stop(){this.pause(),this._cb=null,this._onFrame=null}frame(s){if(!this._running)return;s-=this._pausedTime;let t=s-this._previousDeltaTime;t>=this._fpsInterval&&(this._previousDeltaTime=s-t%this._fpsInterval,this._cb(s,s-this._previousTime),this._previousTime=s),this._onFrame&&requestAnimationFrame(this._onFrame)}get running(){return this._running}get time(){return this._previousTime}};var u=class extends h{constructor(s){super(s),this._mortar=new o(t=>this.frame(t))}start(){this._mortar.start(),super.start(this._mortar.time)}pause(){this._mortar.pause()}resume(){this._mortar.resume()}dispose(){super.dispose(),this._mortar.stop(),this._mortar=null}async run(s){return new Promise(t=>{this.onEnd=function(){this.pause(),t({sweetie:this.run.bind(this),spice:this})},s&&(this.from=this.to,this.update(s)),this.start()})}get running(){return this._mortar.running}};function c(i){return new u(i).run()}export{p as Mixer,o as Mortar,l as Recipe,h as Spice,c as sweet};
