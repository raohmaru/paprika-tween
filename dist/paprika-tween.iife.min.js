/*! For license information please see https://github.com/raohmaru/paprika-tween/blob/master/LICENSE */
var Paprika=(()=>{var u=Object.defineProperty;var c=Object.getOwnPropertyDescriptor;var _=Object.getOwnPropertyNames;var g=Object.prototype.hasOwnProperty;var T=(e,s)=>{for(var t in s)u(e,t,{get:s[t],enumerable:!0})},x=(e,s,t,i)=>{if(s&&typeof s=="object"||typeof s=="function")for(let r of _(s))!g.call(e,r)&&r!==t&&u(e,r,{get:()=>s[r],enumerable:!(i=c(s,r))||i.enumerable});return e};var v=e=>x(u({},"__esModule",{value:!0}),e);var E={};T(E,{Mixer:()=>p,Mortar:()=>o,Recipe:()=>l,Spice:()=>h,sweet:()=>f});var p=class{constructor(){this.spices=[]}add(...s){for(let t=0;t<s.length;t++)this.spices.push(s[t]);return this}start(s){for(let t=0;t<this.spices.length;t++)this.spices[t].start(s);return this}dispose(){for(let s=this.spices.length-1;s!==-1;s--)this.spices[s].dispose();this.spices.length=0}frame(s){for(let t=0;t<this.spices.length;t++)this.spices[t].frame(s)}};var n=class{constructor(){this.elapsed=0}elapse(s){let t=(s-this._startTime)/this.duration;return t<0?t=0:t>1&&(t=1),t}};var w={onEnd:()=>{}},l=class extends n{constructor(s){super(),Object.assign(this,w,s),this.spices=[]}add(...s){for(let t=0;t<s.length;t++)this.spices.push(s[t]);return this}start(s){let t,i=0;for(let r=0;r<this.spices.length;r++)t=this.spices[r],this.elapsed||(t.delay+=i,i=t.duration+t.delay),t.start(s);return this._startTime=this.spices[0]._startTime,this.elapsed||(this.duration=i),this}frame(s){if(!this.spices.length)return;s??(s=performance.now());let t=this.elapse(s);if(this.elapsed!==t){this.elapsed=t;for(let i=0;i<this.spices.length;i++)this.spices[i].frame(s);t===1&&this.onEnd(this)}}dispose(){for(let s=this.spices.length-1;s!==-1;s--)this.spices[s].dispose();this.spices.length=0,this.onEnd=null}};var b={duration:0,delay:0,from:{},to:{},easing:e=>e,render:()=>{},onEnd:()=>{}},h=class extends n{constructor(s){super(),Object.assign(this,b,s)}start(s){this._startTime=s??performance.now(),this._startTime+=this.delay,this._interpolated=Object.assign(Object.create(null),this.to)}frame(s){s??(s=performance.now());let t=this.elapse(s);if(this.elapsed===t)return;this.elapsed=t;let i=this.easing(t),r,d,a;for(a in this._interpolated)r=this.from[a]??0,d=this.to[a],this._interpolated[a]=r+(d-r)*i;this.render(this._interpolated,i,this),t===1&&this.onEnd(this._interpolated,this)}dispose(){this.from=null,this.to=null,this.render=null,this.onEnd=null}update(s){return Object.assign(this,s),this}};var o=class{constructor(s,t=60){this._cb=s,this._fpsInterval=1e3/t,this._running=!1}start(){this._startTime=performance.now(),this._previousTime=this._startTime,this._previousDeltaTime=this._startTime,this._pausedTime=0,this._running=!0,this._onFrame=s=>this.frame(s),this.frame(this._startTime)}pause(){this._running=!1,this._previousPauseTime=performance.now()}resume(){let s=performance.now();this._pausedTime+=s-this._previousPauseTime,this._running=!0,this.frame(s)}stop(){this.pause(),this._cb=null,this._onFrame=null}frame(s){if(!this._running)return;s-=this._pausedTime;let t=s-this._previousDeltaTime;t>=this._fpsInterval&&(this._previousDeltaTime=s-t%this._fpsInterval,this._cb(s,s-this._previousTime),this._previousTime=s),this._onFrame&&requestAnimationFrame(this._onFrame)}get running(){return this._running}get time(){return this._previousTime}};var m=class extends h{constructor(s){super(s),this._mortar=new o(t=>this.frame(t))}start(){this._mortar.start(),super.start(this._mortar.time)}pause(){this._mortar.pause()}resume(){this._mortar.resume()}dispose(){super.dispose(),this._mortar.stop(),this._mortar=null}async run(s){return new Promise(t=>{this.onEnd=function(){this.pause(),t({sweetie:this.run.bind(this),spice:this})},s&&(this.from=this.to,this.update(s)),this.start()})}get running(){return this._mortar.running}};function f(e){return new m(e).run()}return v(E);})();
